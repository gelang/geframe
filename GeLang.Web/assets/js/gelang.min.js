var GeLang={version:"1.0.0",baseUrl:"/",themes:"gelang"};GeLang.Layout=function(n){"use strict";var t=this,f=!1,e=!1,i={},r="",u="",o="",s='<div class="page"><div class="header"><div class="brand"><div class="title"><\/div><div class="separator"><\/div><div class="navigation"><\/div><\/div><div class="module"><\/div><div class="toolbar"><\/div><div class="profile"><\/div><\/div><div class="body"><div class="leftpanel"><div class="leftmenu"><\/div><\/div><div class="mainpanel"><div class="breadcrumbs"><\/div><div class="pageheader"><\/div><div class="maincontent"><\/div><\/div><\/div><div class="modules"><\/div><div class="footer"><\/div><\/div>';this.render=function(e){var h;if(f){console.log("already rendered...!");return}e=e||"body",this.configure(e),this.renderToolbars(e,n.toolbars||[]),this.renderModules(e,n.modules||[]);var c=[],s=[],l=[];this.onModuleChanged=function(n){c.push(n)},this.onMenuChanged=function(n){s.push(n)},this.onRendered=function(n){s.push(n)};this.onHashChanged(function(n,t){var u=t.split("/"),f;if(u.length>0&&u[0]==="lnk"&&u.length>1){if(r!=u[1]){for(f=0;f<c.length;f++)c[f](n,u[1],i[u[1]]);r=u[1]}if(o!==(u[2]||"")){for(f=0;f<s.length;f++)s[f](n,{module:u[1]||"",menu:u[2]||""});o=u[2]}}});this.onModuleChanged(function(n,r,f){var f=i[r],o;t.renderMenus(e,f||[]),o=$(e+' .page .modules li[data-id="'+r+'"]'),o.parent().children().removeClass("selected"),o.addClass("selected"),$(e+" .page .header .brand .title").text(o.text()),u!==o.data("cls")&&($(e+" .page .header .brand").removeClass(u),$(e+" .page .header .brand").addClass(o.data("cls")),u=o.data("cls"))});this.onMenuChanged(function(n,i){if(t.loadMenu!=undefined){var r=$(e+' .page .body .leftmenu li[data-id="'+i.menu+'"]');t.loadMenu(r,i)}});for(this.fixedLayout(),$(window).resize(function(){t.fixedLayout()}),f=!0,h=0;h<l.length;h++)l[h]()},this.configure=function(t){var r;if(e){console.log("already configured...!");return}this.onSave=n.onSave,this.onDelete=n.onDelete,r=s,$(t).empty(),$(t).addClass(GeLang.themes),$(t).html(r);var i=[],u="",f=function(n){return n?n.substring(0,1)=="#"&&(n=n.substring(1)):n="",n};setInterval(function(){var t=f(window.location.hash),n;if(u!=t){for(n=0;n<i.length;n++)i[n](this,t);u=t}},100),this.onHashChanged=function(n){i.push(n)},e=!0},this.fixedLayout=function(){var n=$(window).height(),t=n-$(".page .header").height();$(".page .body").css({height:t+"px"})},this.renderToolbars=function(n,t){var i="";$.each(t,function(n,t){var r=t.name==undefined?"":' class="'+t.name+'" data-id="'+t.name+'"';i+="<div"+r+">"+t.text+"<\/div>"}),$(n+" .page .header .toolbar").html(i)},this.renderModules=function(n,t){var r="";$.each(t,function(n,t){var u=t.cls==undefined?"box":t.cls;r+='<li class="menu '+u+'" data-id="'+t.name+'" data-cls="'+u+'"><label>'+t.text+"<\/label><\/li>",i[t.name]=t.menus}),$(n+" .page .modules").html("<ul>"+r+"<\/ul>");$(n+" .page .modules li").on("click",function(){window.location.href="#lnk/"+($(this).data("id")||"")});$(".page .header .brand .navigation").on("click",function(){$(".page .modules").slideDown("fast")});$(".page .body").on("click",function(){$(".page .modules").slideUp("fast"),$(".page .header .panel.panel-userinfo").slideUp("fast")});$(".page .modules .menu").on("click",function(){$(".page .modules").slideUp("fast");var n=$(this);setTimeout(function(){},250)})},this.renderMenus=function(n,t){var i="";$.each(t,function(n,t){i+='<li data-id="'+t.name+'"><label>'+t.text+"<\/label><\/li>"}),$(n+" .page .body .leftmenu").html("<ul>"+i+"<\/ul>");$(n+" .page .body .leftmenu li").on("click",function(){window.location.href="#lnk/"+(r||"")+"/"+($(this).data("id")||"")})}},GeLang.Layout.prototype.loadMenu=function(n,t){if(t!==undefined&&t.menu.length>0){var i=$(".page .body .mainpanel .maincontent"),r=GeLang.baseUrl+t.module+"/"+t.menu;i.load(r,function(t,i){i==="success"&&(n.parent().children().removeClass("selected"),n.addClass("selected"))})}};
//@ sourceMappingURL=gelang.min.js.map